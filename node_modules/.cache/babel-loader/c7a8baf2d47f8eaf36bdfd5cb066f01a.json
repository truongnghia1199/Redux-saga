{"ast":null,"code":"import { all, call, delay, fork, put, takeEvery, takeLatest, take } from \"redux-saga/effects\";\nimport { addUserError, deleteUserSuccess, loadUsersError, loadUsersSuccess, deleteUserError, addUserSuccess, updateUserError, updateUserSuccess } from \"./actions\";\nimport * as types from \"./actionTypes\";\nimport { addUserApi, loadUsersApi, deleteUserApi, updateUserApi } from \"./api\"; // function load user\n\nfunction* onLoadUsersStartAsync() {\n  try {\n    const response = yield call(loadUsersApi);\n\n    if (response.status === 200) {\n      yield delay(500);\n      yield put(loadUsersSuccess(response.data));\n    }\n  } catch (error) {\n    yield put(loadUsersError(error.response.data));\n  }\n}\n\nfunction* onLoadUsers() {\n  yield takeEvery(types.LOAD_USERS_START, onLoadUsersStartAsync);\n} // function add user\n\n\nfunction* onAddUserStartAsync({\n  payload\n}) {\n  try {\n    const response = yield call(addUserApi, payload);\n\n    if (response.status === 200) {\n      yield put(addUserSuccess(response.data));\n    }\n  } catch (error) {\n    yield put(addUserError(error.response.data));\n  }\n}\n\nfunction* onAddUser() {\n  yield takeLatest(types.ADD_USER_START, onAddUserStartAsync);\n} // function delete user\n\n\nfunction* onDeleteUserStartAsync(userId) {\n  try {\n    const response = yield call(deleteUserApi, userId);\n\n    if (response.status === 200) {\n      yield delay(500);\n      yield put(deleteUserSuccess(userId));\n    }\n  } catch (error) {\n    yield put(deleteUserError(error.response.data));\n  }\n}\n\nfunction* onDeleteUser() {\n  while (true) {\n    const {\n      payload: userId\n    } = yield take(types.DELETE_USER_START);\n    yield call(onDeleteUserStartAsync, userId);\n  }\n} // function update user\n\n\nfunction* onUpdateUserStartAsync(userId) {\n  try {\n    const response = yield call(updateUserApi, userId);\n\n    if (response.status === 200) {\n      yield delay(500);\n      yield put(updateUserSuccess(userId));\n    }\n  } catch (error) {\n    yield put(updateUserError(error.response.data));\n  }\n}\n\nfunction* onUpdateUser() {\n  yield takeLatest(types.UPDATE_USER_START, onUpdaUserStartAsync);\n}\n\nconst userSagas = [fork(onLoadUsers), fork(onAddUser), fork(onDeleteUser), fork(onUpdateUser)];\nexport default function* rootSaga() {\n  yield all([...userSagas]);\n}","map":{"version":3,"sources":["/home/nghiatt/React/git/redux-saga/src/redux/usersagas.js"],"names":["all","call","delay","fork","put","takeEvery","takeLatest","take","addUserError","deleteUserSuccess","loadUsersError","loadUsersSuccess","deleteUserError","addUserSuccess","updateUserError","updateUserSuccess","types","addUserApi","loadUsersApi","deleteUserApi","updateUserApi","onLoadUsersStartAsync","response","status","data","error","onLoadUsers","LOAD_USERS_START","onAddUserStartAsync","payload","onAddUser","ADD_USER_START","onDeleteUserStartAsync","userId","onDeleteUser","DELETE_USER_START","onUpdateUserStartAsync","onUpdateUser","UPDATE_USER_START","onUpdaUserStartAsync","userSagas","rootSaga"],"mappings":"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","sourcesContent":["import { all, call, delay, fork, put, takeEvery, takeLatest, take } from \"redux-saga/effects\"\nimport { addUserError, deleteUserSuccess, loadUsersError, loadUsersSuccess, deleteUserError, addUserSuccess, updateUserError, updateUserSuccess } from \"./actions\"\nimport * as types from \"./actionTypes\"\nimport { addUserApi, loadUsersApi, deleteUserApi, updateUserApi } from \"./api\"\n\n// function load user\n\nfunction* onLoadUsersStartAsync () {\n  try {\n    const response = yield call(loadUsersApi)\n    if(response.status === 200) {\n      yield delay(500)\n      yield put(loadUsersSuccess(response.data))\n    }\n  } \n  catch(error) {\n    yield put(loadUsersError(error.response.data))\n  }\n}\n\nfunction* onLoadUsers () {\n  yield takeEvery(types.LOAD_USERS_START,onLoadUsersStartAsync)\n}\n\n\n// function add user\n\nfunction* onAddUserStartAsync ({payload}) {\n  try {\n    const response = yield call(addUserApi, payload)\n    if(response.status === 200) {\n      yield put(addUserSuccess(response.data))\n    }\n  } \n  catch(error) {\n    yield put(addUserError(error.response.data))\n  }\n}\n\nfunction* onAddUser () {\n  yield takeLatest(types.ADD_USER_START,\n  onAddUserStartAsync)\n}\n\n\n// function delete user\nfunction* onDeleteUserStartAsync (userId) {\n  try {\n    const response = yield call(deleteUserApi, userId)\n    if(response.status === 200) {\n      yield delay(500)\n      yield put(deleteUserSuccess(userId))\n    }\n  } \n  catch(error) {\n    yield put(deleteUserError(error.response.data))\n  }\n}\n\nfunction* onDeleteUser() {\n  while(true) {\n    const { payload : userId } = yield take(types.DELETE_USER_START)\n    yield call(onDeleteUserStartAsync, userId)\n  }\n\n}\n\n// function update user\nfunction* onUpdateUserStartAsync (userId) {\n  try {\n    const response = yield call(updateUserApi, userId)\n    if(response.status === 200) {\n      yield delay(500)\n      yield put(updateUserSuccess(userId))\n    }\n  } \n  catch(error) {\n    yield put(updateUserError(error.response.data))\n  }\n}\n\nfunction* onUpdateUser() {\n  yield takeLatest(types.UPDATE_USER_START, onUpdaUserStartAsync)\n}\n\n\nconst userSagas = [fork(onLoadUsers), fork(onAddUser), fork(onDeleteUser), fork(onUpdateUser)]\n\nexport default function* rootSaga() {\n  yield all([...userSagas])\n}\n\n"]},"metadata":{},"sourceType":"module"}